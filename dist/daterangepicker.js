!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Daterangepicker",[],e):"object"==typeof exports?exports.Daterangepicker=e():t.Daterangepicker=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,o)=>{for(var i in o)t.o(o,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:o[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};return(()=>{t.r(e),t.d(e,{LOCK_UNAVAILABLE:()=>o,LOCK_LOCKED:()=>i,default:()=>n});const o=1,i=2;function s(t,e={}){if(t.instance)return t.instance;t.instance=this,this._$container=t;const o=(t,e)=>void 0===t?e:t;this.options={firstDayOfTheWeek:o(e.firstDayOfTheWeek,1),singleMode:o(e.singleMode,!1),locale:o(e.locale,"ru-RU"),minDays:o(e.minDays,1),monthsCount:o(e.monthsCount,12),perRow:o(e.perRow,void 0),minDate:o(e.minDate,new Date),maxDate:o(e.maxDate,void 0),breakpoints:o(e.breakpoints,{}),internalInputs:o(e.internalInputs,!0),on:Object.assign({rangeSelect:null,daySelect:null},e.on||{}),filter:Object.assign({lockDays:null,tooltipText:null},e.filter||{})},this.init()}s.prototype.init=function(){void 0===this.options.perRow&&(this.options.perRow=this.options.monthsCount),this.options.minDate&&this.options.minDate.setHours(0,0,0,0),this.options.breakpoints[this._breakpoint=0]=Object.assign({},this.options),this._today=new Date,this._today.setHours(0,0,0,0),this._$picker=this._$createElement(`<div class="Daterangepicker">\n            ${this.options.internalInputs?`<div class="Daterangepicker__inputs">\n                    ${this.options.singleMode?'<input type="hidden" name="date">':'<input type="hidden" name="date_from">\n                           <input type="hidden" name="date_to">'}\n                </div>`:""}\n            <div class="Daterangepicker__months"></div>\n            <div class="Daterangepicker__tooltip">\n                <div class="Daterangepicker__tooltip-content"></div>\n            </div>\n        </div>`),this._$months=this._$picker.querySelector(".Daterangepicker__months"),this._$tooltip=this._$picker.querySelector(".Daterangepicker__tooltip"),this._$tooltipContent=this._$picker.querySelector(".Daterangepicker__tooltip-content"),this._$inputs=this._$picker.querySelectorAll('input[name^="date"]'),this._selection={},this._visualSelection={},this._selectDate(this.options.minDate),this._$container.appendChild(this._$picker),Object.keys(this.options.breakpoints).length&&(window.addEventListener("resize",this._onWindowResizeEvent.bind(this)),this._onWindowResizeEvent())},s.prototype.getMonthFormatted=function(t){const e=this.getDateTimeFormat(t,{month:"long"});return e.slice(0,1).toUpperCase()+e.slice(1)},s.prototype.getDateTimeFormat=function(t,e){return Intl.DateTimeFormat(this.options.locale,e).format(t)},s.prototype.getWeekDaysFormatted=function(){const t=new Date,e=[];t.setDate(t.getDate()-2);for(let o=0;o<7;++o)t.setDate(t.getDate()+1),e.push({day:t.getDay(),title:this.getDateTimeFormat(t,{weekday:"short"})});return e.sort(((t,o)=>{const i=this.options.firstDayOfTheWeek%7;let s=t.day,n=o.day;return s==i?-1:n==i?1:(s<i&&(s+=e.length),n<i&&(n+=e.length),s-n)})),e},s.prototype.getDaysCountInMonth=function(t){const e=new Date(t.getTime());return e.setDate(1),e.setHours(0,0,0,0),e.setMonth(e.getMonth()+1),e.setDate(0),e.getDate()},s.prototype.rangeReset=function(){this._rangeReset()},s.prototype.rangeSelect=function(t,e){if(!(t instanceof Date&&e instanceof Date))return;if(t.setHours(0,0,0,0),e.setHours(0,0,0,0),!this.getIsRangeSelectable(t,e))return;const o=this._$getDayByDate(t),i=this._$getDayByDate(e);o&&o.classList.add("is-selected","is-selected-from"),i&&i.classList.add("is-selected","is-selected-to"),this._rangeVisualSelect(t,e),this._selection.date_from=t,this._selection.date_to=e,t>e&&([t,e]=[e,t]),this._$inputs[0]&&(this._$inputs[0].value=this.formatDate(t)),this._$inputs[1]&&(this._$inputs[1].value=this.formatDate(e)),this._callback("rangeSelect",t,e)},s.prototype.formatDate=function(t,e="Y-m-d"){if(t instanceof Date)return e.replace("Y",t.getFullYear()).replace("m",("0"+(t.getMonth()+1)).slice(-2)).replace("d",("0"+t.getDate()).slice(-2))},s.prototype.getIsRangeSelectable=function(t,e){if(t.setHours(0,0,0,0),e.setHours(0,0,0,0),t>e&&([t,e]=[e,t]),Math.abs(t.getTime()-e.getTime())/1e3/86400<this.options.minDays)return!1;const o=new Date;for(o.setTime(t.getTime());o<e;){if(this._filterLockDays(o))return!1;o.setDate(o.getDate()+1)}return!0},s.prototype.getDateFrom=function(){if(this._selection.date_from)return this._selection.date_to&&this._selection.date_from>this._selection.date_to?this._selection.date_to:this._selection.date_from},s.prototype.getDate=s.prototype.getDateFrom,s.prototype.getDateTo=function(){if(this._selection.date_to)return this._selection.date_from&&this._selection.date_from>this._selection.date_to?this._selection.date_from:this._selection.date_to},s.prototype.plural=function(t,e){return(t%10==1&&t%100!=11?e[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?e[1]:e[2]).replace("%d",t)},s.prototype._rangeReset=function(){this._rangeVisualReset(),this._selection={}},s.prototype._$createMonths=function(t){for(;this._$months.lastElementChild;)this._$months.removeChild(this._$months.lastElementChild);this._tooltipHide();const e=new Date(t.getTime());e.setDate(1),e.setHours(0,0,0,0);const o=[];for(let t=0;t<this.options.monthsCount;++t)o.push(this._$createMonth(e)),e.setMonth(e.getMonth()+1);for(let t=0;t<o.length;t+=this.options.perRow){const e=document.createElement("div");e.className="Daterangepicker__row",o.slice(t,t+this.options.perRow).forEach((t=>{e.appendChild(t)})),this._$months.appendChild(e)}(this._selection.date_from||this._selection.date_to)&&this._rangeVisualSelect(this._selection.date_from,this._selection.date_to)},s.prototype._$createMonth=function(t){const e=t.getMonth(),o=this.getMonthFormatted(t),i=this.getWeekDaysFormatted(),s=this._$createElement(`<div class="Month" data-time="${t.getTime()}">\n            <div class="Month__header">\n                <div class="Month__arrow Month__arrow--prev${this.options.minDate&&t<=this.options.minDate?" is-disabled":""}">\n                    <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M7 13L1 7L7 1" stroke="#8C8C8C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    </svg>\n                </div>\n                <div class="Month__title">${o} ${t.getFullYear()}</div>\n                <div class="Month__arrow Month__arrow--next${this.options.maxDate&&t>=this.options.maxDate?" is-disabled":""}">\n                    <svg width="8" height="14" viewBox="0 0 8 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M1 0.999999L7 7L1 13" stroke="#8C8C8C" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>\n                    </svg>\n                </div>\n            </div>\n            <div class="Month__week">${i.map((t=>`<div class="Month__weekday">${t.title}</div>`)).join("")}</div>\n            <div class="Month__days"></div>\n        </div>`);[{selector:".Month__arrow--prev",name:"prev"},{selector:".Month__arrow--next",name:"next"}].forEach((t=>{const e=s.querySelector(t.selector);e.addEventListener("click",(o=>{o.stopPropagation(),this._onArrowClick(e,t.name)}))}));const n=s.querySelector(".Month__days"),a=new Date(t.getTime());for(a.setDate(1),a.setHours(0,0,0,0);a.getMonth()==e;){const t=this._$createWeek();i.forEach((o=>{a.getDay()==o.day&&a.getMonth()==e?(t.appendChild(this._$createDay(a)),a.setDate(a.getDate()+1)):t.appendChild(this._$createEmptyDay())})),n.appendChild(t)}return s},s.prototype._onArrowClick=function(t,e){if(t.classList.contains("is-disabled"))return!1;const o=new Date(parseInt(this._$months.querySelector(".Month").dataset.time,10));if(o.setDate(1),o.setHours(0,0,0,0),o.setMonth(o.getMonth()+("prev"==e?-this.options.monthsCount:this.options.monthsCount)),o<this.options.minDate&&o.setTime(this.options.minDate.getTime()),this.options.maxDate){const t=new Date(o.getTime());t.setMonth(t.getMonth()+this.options.monthsCount),t>this.options.maxDate&&(o.setTime(this.options.maxDate.getTime()),o.setMonth(o.getMonth()-this.options.monthsCount+1))}this._selectDate(o)},s.prototype._selectDate=function(t){this._selectedDate=t,this._$createMonths(t)},s.prototype._$createWeek=function(t){return this._$createElement('<div class="Week"></div>')},s.prototype._$createDay=function(t){const e=this._$createElement(`<div class="Day" data-time="${t.getTime()}" data-day="${t.getDay()}">${t.getDate()}</div>`);return e.addEventListener("click",this._onDayClickEvent.bind(this)),this.options.singleMode||e.addEventListener("mouseenter",this._onDayMouseEnterEvent.bind(this)),this._updateDay(e),e},s.prototype.update=function(){this._$months.querySelectorAll(".Month").forEach((t=>{this._updateMonth(t)}))},s.prototype._updateMonth=function(t){t.querySelectorAll(".Day[data-time]").forEach((t=>{this._updateDay(t)}))},s.prototype._updateDay=function(t){const e=new Date(parseInt(t.dataset.time,10)),o=this._filterLockDays(e),s=this._today.getTime()==e.getTime();t.classList.toggle("is-disabled",o),t.classList.toggle("is-locked",o==i),t.classList.toggle("is-today",s)},s.prototype._onDayClickEvent=function(t){this._onDayClick(t.target)},s.prototype._onDayMouseEnterEvent=function(t){this._onDayMouseEnter(t.target)},s.prototype._onDayMouseEnter=function(t){if(!this._selection.date_from||this._selection.date_to)return;if(t.dataset.time==this._selection.date_from.getTime())return;const e=new Date(parseInt(t.dataset.time,10));this._rangeVisualSelect(this._selection.date_from,e)},s.prototype._onDayClick=function(t){if(t.classList.contains("is-disabled"))return!1;if(this.options.singleMode)return this._rangeReset(),this._selection.date_from=new Date(parseInt(t.dataset.time,10)),t.classList.add("is-selected"),void this._callback("daySelect",this._selection.date_from);if(this._selection.date_from&&this._selection.date_to&&this._rangeReset(),t.classList.add("is-selected"),this._selection.date_from?this._selection.date_to||(this._selection.date_to=new Date(parseInt(t.dataset.time,10))):this._selection.date_from=new Date(parseInt(t.dataset.time,10)),this._selection.date_from&&this._selection.date_to){if(!this.getIsRangeSelectable(this._selection.date_from,this._selection.date_to))return void this._rangeReset();this.rangeSelect(this._selection.date_from,this._selection.date_to)}},s.prototype._rangeVisualReset=function(){this._$months.querySelectorAll(".Day[data-time]").forEach((t=>{t.classList.remove("is-selected","is-selected-from","is-selected-to","is-selected-between")})),this._tooltipHide()},s.prototype._rangeVisualSelect=function(t,e){t&&t instanceof Date&&t.setHours(0,0,0,0),e&&e instanceof Date&&e.setHours(0,0,0,0);let o=t instanceof Date?t.getTime():0,i=e instanceof Date?e.getTime():0;o>i&&([o,i]=[i,o]);const s=this._$months.querySelectorAll(".Day[data-time]");for(let t=0;t<s.length;++t)s[t].classList.toggle("is-selected-between",s[t].dataset.time>o&&s[t].dataset.time<i);const n=this._$getDayByDate(t),a=this._$getDayByDate(e);if(this._visualSelection.$day_from_old&&this._visualSelection.$day_from_old!=n&&this._visualSelection.$day_from_old.classList.remove("is-selected","is-selected-from"),this._visualSelection.$day_to_old&&this._visualSelection.$day_to_old!=a&&this._visualSelection.$day_to_old.classList.remove("is-selected","is-selected-to"),n&&n.classList.add("is-selected","is-selected-from"),a&&a.classList.add("is-selected","is-selected-to"),this._visualSelection.$day_from_old=n,this._visualSelection.$day_to_old=a,this._selection.$day_from=n,this._selection.$day_to=a,a){const t=Math.floor(Math.abs(o-i)/864e5)+1;this._tooltipShow(t)}},s.prototype._tooltipShow=function(t){this._$tooltipContent.textContent=this._filterTooltipText(t),this._$tooltip.classList.toggle("is-show",this._$tooltip.textContent.length),this._tooltipUpdate()},s.prototype._tooltipUpdate=function(){if(!this._selection.$day_to)return;let t=0,e=0,o=this._selection.$day_to;do{e+=o.offsetTop,t+=o.offsetLeft}while((o=o.offsetParent)&&o!=this._$picker);this._$tooltip.style.top=Math.round(e-this._$tooltip.offsetHeight)+"px",this._$tooltip.style.left=Math.round(t+this._selection.$day_to.offsetWidth/2-this._$tooltip.offsetWidth/2)+"px"},s.prototype._tooltipHide=function(){this._$tooltip.classList.remove("is-show")},s.prototype._filterTooltipText=function(t){return"function"==typeof this.options.filter.tooltipText?this.options.filter.tooltipText.call(this,t)||"":this.plural(t,["%d день","%d дня","%d дней"]).replace("%d",t)},s.prototype._filterLockDays=function(t){return t<this.options.minDate||t>this.options.maxDate?o:"function"==typeof this.options.filter.lockDays&&this.options.filter.lockDays.call(t)},s.prototype._onWindowResizeEvent=function(t){this._selection.$day_to&&this._tooltipUpdate();let e=0;const o=Object.keys(this.options.breakpoints).sort(((t,e)=>t-e));for(let t in o)if(window.innerWidth<=o[t]){e=o[t];break}this._setBreakpoint(e)},s.prototype._setBreakpoint=function(t){this._breakpoint!=t&&(this._breakpoint=t,this.options.breakpoints[t]&&(Object.assign(this.options,this.options.breakpoints[t]),this._$createMonths(this._selectedDate)))},s.prototype._$getDayByDate=function(t){const e=t instanceof Date?t.getTime():0;return this._$months.querySelector('.Day[data-time="'+e+'"]')},s.prototype._$createEmptyDay=function(){return this._$createElement('<div class="Day is-empty"></div>')},s.prototype._$createElement=function(t){const e=document.createElement("div");return e.insertAdjacentHTML("afterbegin",t),e.children.length>1?e.children:e.firstElementChild},s.prototype._callback=function(t){if("function"==typeof this.options.on[t])return this.options.on[t].apply(this,[].slice.call(arguments,1))};const n=s})(),e})()}));